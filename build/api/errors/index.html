<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>Errors - Omise API Documentation</title>
    <link rel="stylesheet" href="https://cdn1.omise.co/fonts/inconsolata.css">
    <link rel="stylesheet" href="https://cdn2.omise.co/fonts/lato.css">
    <link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <!-- Facebook OpenGraph -->
    <meta property="og:title" content="Errors" />
    <meta property="og:image" content="https://cdn.omise.co/assets/omise-2x.png" />
  </head>
  <body>
    <header class="Header">
      <div class="HeaderNavigation">
        <div class="Wrapper">
          <img width="96" height="32" alt="Omise" src="/images/logo.svg" />
          <a class="Login" href="https://dashboard.omise.co/">
            <span></span> Dashboard
          </a>
        </div>
      </div>
    </header>
    <div class="Wrapper"><div class="Main">
      <nav class="Nav"><div class="NavInner">
        <h2>Documentation</h2>
        <ul>
          <li><a href="/">Getting Started</a></li>
          <li><a href="/collecting-card-information">Collecting Cards</a></li>
          <li><a href="/charging-cards">Charging Cards</a></li>
          <li><a href="/refunding-charges">Refunding Charges</a></li>
          <li><a href="/dashboard-transfers">Creating transfers</a></li>
        </ul>

        <h2>References</h2>
        <ul>
          <li><a href="/omise-js">Omise.js</a></li>
          <li><a href="/card-js">Card.js</a></li>
          <li><a href="/api/authentication">Authentication</a></li>
          <li><a href="/api/pagination">Pagination &amp; Lists</a></li>
          <li><a href="/api/tests">Tests</a></li>
          <li><a class="Current" href="/api/errors">Errors</a></li>
          <li>&nbsp;</li>
          <li><a href="/api/account">Account</a></li>
          <li><a href="/api/balance">Balance</a></li>
          <li><a href="/api/tokens">Tokens</a></li>
          <li><a href="/api/cards">Cards</a></li>
          <li><a href="/api/charges">Charges</a></li>
          <li><a href="/api/customers">Customers</a></li>
          <li><a href="/api/refunds">Refunds</a></li>
          <li><a href="/api/transfers">Transfers</a></li>
          <li><a href="/api/transactions">Transactions</a></li>
          <li>&nbsp;</li>
        </ul>

        <h2>Plugins</h2>
        <ul>
          <li><a href="/omise-woocommerce">WooCommerce</a></li>
        </ul>
      </div></nav>
      <article class="Article">
        <header class="ArticleHeader">
          <h1>Errors</h1>
          <p>Omise will return formatted errors in case something does not go as smoothly as expected.</p>
        </header>
        <div class="ArticleContent">
          <h2 id="table-of-contents">Table of Contents</h2>

<ul>
<li><a href="#the-error-object">The error object</a></li>
<li><a href="#authentication-failure">Authentication failure</a></li>
<li><a href="#not-found">Not found</a></li>
<li><a href="#used-token">Used token</a></li>
<li><a href="#invalid-card">Invalid card</a></li>
<li><a href="#invalid-card-token">Invalid card Token</a></li>
<li><a href="#missing-card">Missing card</a></li>
<li><a href="#invalid-charge">Invalid charge</a></li>
<li><a href="#failed-capture">Failed capture</a></li>
<li><a href="#failed-fraud-check">Failed fraud check</a></li>
</ul>

<hr>

<h2 id="the-error-object">The Error Object</h2>

<table><thead>
<tr>
<th style="text-align: left">Key</th>
<th style="text-align: left">Value</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>object</code></td>
<td style="text-align: left"><em>(string)</em> &quot;error&quot;</td>
</tr>
<tr>
<td style="text-align: left"><code>location</code></td>
<td style="text-align: left"><em>(string)</em> Link to an article about the error.</td>
</tr>
<tr>
<td style="text-align: left"><code>code</code></td>
<td style="text-align: left"><em>(string)</em> Error code</td>
</tr>
<tr>
<td style="text-align: left"><code>message</code></td>
<td style="text-align: left"><em>(string)</em> A short explanation about the error</td>
</tr>
</tbody></table>

<hr>

<h2 id="authentication-failure">Authentication Failure</h2>

<p>An authentication failure means the key you passed is not valid.
You can find your keys <a href="https://dashboard.omise.co/test/api-keys">here</a>.
Here is an example when trying to retrieve a customer:</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/customers/cust_test_4xvqerqazpdhf5xu2zj <span class="se">\</span>
  -u skey_test_please_let_me_in:      <span class="c"># Incorrect secret key</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#authentication-failure"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authentication_failure"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authentication failed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="not-found">Not Found</h2>

<p>Omise API sometimes requires an ID to be passed. If the object with the corresponding ID cannot be found, this error is raised.
Here is an example, trying to retrieve a customer with an incorrect ID:</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/customers/cust_test_000000000000 <span class="se">\ </span><span class="c"># Not a valid customer ID.</span>
  -u skey_test_4xc6eevsmz5phbtjcaf:
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#not-found"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not_found"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer cust_test_000000000000 was not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="used-token">Used Token</h2>

<p>Tokens are single-use only. Any attempt to re-use a token will result in a <code>used_token</code> error.
Here is an example when trying to create a customer with a token that was already used:</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/customers <span class="se">\</span>
  -X POST <span class="se">\</span>
  -u skey_test_4xc6eevsmz5phbtjcaf: <span class="se">\</span>
  -d <span class="s2">"description=John Doe (id: 30)"</span> <span class="se">\</span>
  -d <span class="s2">"email=john.doe@example.com"</span> <span class="se">\</span>
  -d <span class="s2">"card=tokn_test_4xvpea0ifwajbx3f873"</span> <span class="c"># This token has already been used</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#used-token"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"used_token"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"token was already used"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="invalid-card">Invalid Card</h2>

<p>Attempting to create an invalid card will result in an <code>invalid_card</code> error to be returned.
Here is an example of invalid card creation:</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://vault.omise.co/tokens <span class="se">\</span>
  -X POST <span class="se">\</span>
  -u pkey_test_4xc6eevsm4i0ysitb4j: <span class="se">\</span>
  -d <span class="s2">"card[name]=JOHN DOE"</span> <span class="se">\</span>
  -d <span class="s2">"card[city]=Bangkok"</span> <span class="se">\</span>
  -d <span class="s2">"card[postal_code]=10320"</span> <span class="se">\</span>
  -d <span class="s2">"card[number]=Definitely not a card number"</span> <span class="se">\ </span><span class="c"># Invalid card number!</span>
  -d <span class="s2">"card[expiration_month]=10"</span> <span class="se">\</span>
  -d <span class="s2">"card[expiration_year]=2016"</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#invalid-card"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_card"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number is invalid and brand not supported (unknown)"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="invalid-card-token">Invalid Card Token</h2>

<p>Some API requests expect a card token (string) as parameter. If a non-string object is passed, the <code>invalid_card_token</code> error is raised.
This can typically happen when you try to pass a card dictionary instead of a token</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/customers <span class="se">\</span>
  -X POST <span class="se">\</span>
  -u skey_test_4xc6eevsmz5phbtjcaf: <span class="se">\</span>
  -d <span class="s2">"description=John Doe (id: 30)"</span> <span class="se">\</span>
  -d <span class="s2">"email=john.doe@example.com"</span> <span class="se">\</span>
  -d <span class="s2">"card[number]=4242424242424242"</span> <span class="se">\ </span><span class="c"># This endpoint expects a token, not a card object</span>
  -d <span class="s2">"card[name]=Somchai Prasert"</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#invalid-card-token"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_card_token"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid card token"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="missing-card">Missing Card</h2>

<p>The creation of a token expects card data parameters. If no card parameters are passed, <code>missing_card</code> is raised:</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://vault.omise.co/tokens <span class="se">\</span>
  -X POST <span class="se">\</span>
  -u pkey_test_4xc6eevsm4i0ysitb4j:

  <span class="c"># Omitting the following parameters:</span>
  <span class="c">#-d "card[name]=JOHN DOE" \</span>
  <span class="c">#-d "card[city]=Bangkok" \</span>
  <span class="c">#-d "card[postal_code]=10320" \</span>
  <span class="c">#-d "card[number]=4242424242424242" \</span>
  <span class="c">#-d "card[expiration_month]=10" \</span>
  <span class="c">#-d "card[expiration_year]=2016"</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#missing-card"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"missing_card"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"request contains no card parameters"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="invalid-charge">Invalid Charge</h2>

<p>If a charge does not meet Omise minimum requirements upon creation, the <code>invalid_charge</code> error is raised.
Its <code>message</code> attribute contains more information about the specific errors.
Here is an example with an invalid amount and currency:</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/charges <span class="se">\</span>
  -X POST <span class="se">\</span>
  -u skey_test_4xc6eevsmz5phbtjcaf: <span class="se">\</span>
  -d <span class="s2">"amount=eleventy"</span> <span class="se">\ </span>           <span class="c"># Not an integer</span>
  -d <span class="s2">"currency=bottle caps"</span> <span class="se">\ </span>      <span class="c"># Currently not an accepted currency</span>
  -d <span class="s2">"return_uri=http://www.example.com/orders/3947/complete"</span> <span class="se">\</span>
  -d <span class="s2">"customer=cust_test_4xko29qxltncwq3u0i3"</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#invalid-charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"currency is currently not supported and amount is not a number"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="failed-capture">Failed Capture</h2>

<p>The <code>failed_capture</code> error is raised when something went wrong with a charge capture.
It could be that the charge was not authorized yet or was already captured.
The specific reason can be found in the <code>message</code> attribute.
The following example shows the attempted capture of a charge that has not been authorized.</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/charges/chrg_test_4xvqmz1wx93it4cut8g/capture <span class="se">\</span>
  -X POST  <span class="se">\</span>
  -u skey_test_4xc6eevsmz5phbtjcaf:
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#failed-capture"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed_capture"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Charge is not authorized"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<hr>

<h2 id="failed-fraud-check">Failed Fraud Check</h2>

<p>Every charge Omise receives is checked for fraud. If the charge is considered fraudulent, <code>failed_fraud_check</code> is raised.</p>

<h3 id="curl">Curl</h3>
<pre><code class="highlight shell">curl https://api.omise.co/charges <span class="se">\</span>
  -X POST <span class="se">\</span>
  -u skey_test_4xsjvwfnvb2g0l81sjz: <span class="se">\</span>
  -d <span class="s2">"amount=10000000000"</span> <span class="se">\</span>
  -d <span class="s2">"currency=thb"</span> <span class="se">\</span>
  -d <span class="s2">"description=Attempting something bad!"</span> <span class="se">\</span>
  -d <span class="s2">"ip=133.71.33.7"</span> <span class="se">\</span>
  -d <span class="s2">"card=tokn_test_4xs9408a642a1htto8z"</span>
</code></pre>

<h3 id="json-response">JSON Response</h3>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.omise.co/api/errors#failed-fraud-check"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed_fraud_check"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed fraud check"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

        </div>
        <footer class="ArticleFooter">
          You have a question or something is missing from the docs?<br>
          <a href="https://github.com/omise/docs">Open an issue or contribute to the docs on github.</a>
        </footer>
      </article>
    </div></div>
    <div class="Wrapper">
      <footer class="Footer">
        © 2015 Omise, Co. Ltd.
        <a href="https://www.omise.co/">About</a>
        <a href="https://www.omise.co/terms.html">Terms</a>
        <a href="https://www.omise.co/privacy.html">Privacy</a>
      </footer>
    </div>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54948916-2', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>

  </body>
</html>
